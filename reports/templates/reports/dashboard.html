{% extends "./base.html" %}

{% block content %}

<div class="page-header">
    <h1>Dashboard</h1>
</div>

<div style="height:45%;" class="row">
    <div class="col-sm-4">
        <h2>Asset Exposure</h2>
        <canvas id="chart" width="150" height="150"></canvas>
        <script>
            var pieData = [
                {% for item, label, colors in set_1 %}
                {
                    value: {{item}},
                    label: "{{label}}",
                    color : "{{colors}}"
                },
                {% endfor %}
            ];
            // get bar chart canvas
            var mychart = document.getElementById("chart").getContext("2d");
            steps = 10
            max = 10
            // draw pie chart
            new Chart(document.getElementById("chart").getContext("2d")).Pie(pieData);
        </script>
    </div>

    <div class="col-sm-4">
        <h2>Risk On/Off</h2> 
        <canvas id="chart2" width="150" height="150"></canvas>
        <script>
            var pieData2 = [
                {% for item, label, colors in set_2 %}
                {
                    value: {{item}},
                    label: "{{label}}",
                    color : "{{colors}}"
                },
                {% endfor %}
            ];
            // get bar chart canvas
            var mychart2 = document.getElementById("chart2").getContext("2d");
            steps = 10
            max = 10
            // draw pie chart
            new Chart(document.getElementById("chart2").getContext("2d")).Pie(pieData2); 
        </script>
    </div>

    <div class="col-sm-4">
        <h2>Geography</h2> 
        <canvas id="chart3" width="150" height="150"></canvas>
        <script>
            var pieData3 = [
                {% for item, label, colors in set_3 %}
                {
                    value: {{item}},
                    label: "{{label}}",
                    color : "{{colors}}"
                },
                {% endfor %}
            ];
            // get bar chart canvas
            var mychart3 = document.getElementById("chart3").getContext("2d");
            steps = 10
            max = 10
            // draw pie chart
            new Chart(document.getElementById("chart3").getContext("2d")).Pie(pieData3); 
        </script>
    </div>
</div>

<div style="width:100%; height:25%; margin-top:150px">  <!--changes height according to how many rows -->
    
        <h1 style="display:block; font-size:20px;">Portfolio Metrics</h1>
        <table class="table">
            <tbody>
                <tr>
                    {% for values2 in set2 %}
                    {{values2}},
                    {{risk}}
                    {% endfor %}
                    <th class="col-xs-6">DV01</th>
                    <th class="col-xs-6">{{values2.0}}</th>
                </tr>
                <tr>
                    <td>Carry</td>
                    <td>{{values2.1}}</td>
                </tr>
                <tr>
                    <td>95% VAR</td>
                    <td>{{values2.2}}</td>
                </tr>
                <tr>
                    <td>Leverage</td>
                    <td>{{values2.3}}</td>
                </tr>
            </tbody>
        </table>
        
        <h1 style="display:block; font-size:20px;">Portfolio Risks Statistics</h1>
        <table class="table">
            <thead>
                <tr>
                    <th class="col-xs-6">1-Day Pnl</th>
                    <th class="col-xs-6">{{values2.4}}</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>1-Month PnL</td>
                    <td>{{values2.5}}</td>
                </tr>
                <tr>
                    <td>Carry PnL </td>
                    <td>{{values2.6}}</td>
                </tr>
            </tbody>
        </table>
</div>  <!--closes off the second row  -->

{% endblock content %}